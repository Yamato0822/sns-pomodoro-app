# SNS型ポモドーロタイマーアプリ - デザイン計画書

## コンセプト
**「孤独な作業を、仲間との繋がりに変える」**

ポモドーロテクニックを用いた集中支援に、SNS的な「頑張りの共有・称賛」を掛け合わせたアプリです。

---

## デザイン原則

### モバイル優先設計
- **画面向き**: ポートレート（9:16）
- **操作性**: ワンハンド操作を想定
- **テーマ対応**: ライト/ダーク/システム自動切替
- **文字サイズ対応**: 小/中/大の3段階

### Apple Human Interface Guidelines準拠
- シンプルで集中を阻害しないUI
- 標準的なiOSアプリと同等の使用感
- 一貫性のあるナビゲーション

---

## スクリーン構成

### 1. ホーム画面（初期表示）
**目的**: タスク管理とクイック開始

**主要コンテンツ**:
- **ヘッダー**: 月表示（JANUARY 2026）+ Today ボタン + 日付表示（DAY 25 / 31）
- **カレンダーストリップ**: 直近7日間の日付表示（当日ハイライト）
- **進捗状況**: 達成率（完了タスク数 / 総タスク数）+ プログレスバー
- **タスク追加行**: タスク名入力フィールド + 追加ボタン（+） + カレンダーボタン + クイック再生（▶）
- **今日のタスク**: 実行可能なタスク一覧（チェック + タスク名 + 再生ボタン）
- **次週**: 翌日以降のタスク（アコーディオン、デフォルト折りたたみ）

**主要機能**:
- タスク追加・編集・削除
- カレンダーボタンで日付・時刻をシームレスに設定
- タスク完了トグルで達成率を即時更新
- タスク再生で直接ポモドーロ画面へ遷移
- 過去/未来の日付タスク閲覧

---

### 2. ポモドーロ画面（タイマー実行）
**目的**: 集中タイマーの実行と記録

**主要コンテンツ**:
- **円形プログレス**: 残り時間を円形で表示
- **状態表示**: FOCUS / BREAK の状態表示
- **残り時間**: mm:ss 形式での表示
- **達成率**: ホーム画面と同定義の達成率表示
- **操作ボタン**: 一時停止/再開 + 終了

**主要機能**:
- Focus: 25分（固定）
- Break: 5分（固定）
- Focus完了時にアラーム音/バイブ
- Break への自動誘導
- Focus完了時に投稿導線を提示
- バックグラウンド対応（開始/終了時刻保持で復元）

---

### 3. 統計・フィード画面
**目的**: 週次統計とSNSフィード

**主要コンテンツ**:

#### 統計サマリー（上部）
- **対象**: 今週（月曜開始/日曜開始は設定で切替）
- **表示内容**:
  - 総集中時間
  - ポモドーロ回数（Focus完了数）
  - 日別ブレイクダウン（簡易グラフ）

#### みんなの頑張りフィード（SNS）
- **表示順**: 新着順
- **投稿内容**:
  - ユーザー名 + アイコン
  - 相対時刻（2時間前など）
  - 集中時間チップ（例: 1h 45m 集中）
  - コメント本文（任意）
- **リアクション**:
  - ワンタップ（like/heart/fire等）
  - トグル（再タップで解除）
  - カウント表示
- **範囲**: 全体公開フィード（public）

**主要機能**:
- スクロール時のジャンク抑制
- 画像最適化
- 差分更新対応

---

### 4. マイページ（プロフィール＋設定）
**目的**: プロフィール管理と設定

**主要コンテンツ**:

#### プロフィールセクション
- アイコン（Supabase Storage で変更可）
- 表示名（編集可）
- メールアドレス表示（Clerk連携）
- ログアウトボタン

#### 設定セクション
- **テーマ**: ライト / ダーク / システム
- **文字サイズ**: 小 / 中 / 大
- **週の開始**: 月曜 / 日曜
- **リマインダー**: 通知許可設定
- **データ初期化**: タスク・ログ削除（確認ダイアログ必須）
- **バージョン情報**

**主要機能**:
- Clerk認証との連携
- テーマ・文字サイズ設定の全体反映
- アイコン画像のアップロード

---

## ナビゲーション構造

### ボトムタブナビゲーション（アイランド型）
- **形状**: 画面下部に浮いたカプセル形状（Floating）
- **構成**:
  - 左: **マイページ** (person.fill)
  - 中央: **ホーム** (house.fill) - 初期表示
  - 右: **統計** (chart.bar.fill)
- **遷移**: スムーズなアニメーション付きタブ切替

---

## 色設計

### テーマカラー
- **Primary**: 集中を表現する落ち着いた色（例: 青系）
- **Background**: ライト時は白、ダーク時は深い灰色
- **Surface**: カード背景（ライト時は薄いグレー、ダーク時は濃いグレー）
- **Foreground**: テキスト（ライト時は濃い灰色、ダーク時は白）
- **Muted**: 補助テキスト（ライト時は中程度の灰色、ダーク時は薄い灰色）
- **Success**: 完了状態（緑）
- **Warning**: 警告状態（黄）
- **Error**: エラー状態（赤）

---

## 主要ユーザーフロー

### Flow 1: タスク作成と予定設定
1. ホーム画面でタスク名を入力
2. カレンダーボタンをタップ
3. Bottom Sheet で日付・時刻を設定
4. 「適用」をタップ
5. タスク追加行にスケジュールチップ表示
6. 「+」ボタンでタスク作成完了

### Flow 2: ポモドーロ実行
1. ホーム画面でタスクの「▶」をタップ
2. ポモドーロ画面へ遷移
3. Focus 25分実行
4. 完了時にアラーム + 投稿導線表示
5. Break 5分実行
6. セッション完了で focus_log 作成

### Flow 3: SNSフィード確認
1. 統計・フィード画面へ遷移
2. 週次統計を確認
3. みんなの頑張りフィードをスクロール
4. 投稿にリアクション（like/heart/fire等）

### Flow 4: 設定変更
1. マイページへ遷移
2. 設定セクションで各項目を変更
3. テーマ・文字サイズは即時全体反映
4. 週の開始は統計表示に反映

---

## レスポンシブ対応

### 文字サイズ対応
- **小**: 本体 12px、見出し 18px
- **中**: 本体 14px、見出し 20px（デフォルト）
- **大**: 本体 16px、見出し 24px

### ダークモード対応
- CSS変数で自動切替
- Clerk認証UIも同様に追従

---

## アクセシビリティ

- タッチターゲット最小サイズ: 44px × 44px
- コントラスト比: WCAG AA 基準以上
- キーボードナビゲーション対応
- スクリーンリーダー対応

---

## パフォーマンス目標

- タブ切替: 遅延なし
- タスク追加: 即座に反映
- フィードスクロール: ジャンク抑制（60fps目標）
- 画像最適化: 遅延読み込み対応

---

## 実装優先度

### MVP（必須）
1. ホーム画面（タスク管理 + カレンダー）
2. ポモドーロ画面（タイマー）
3. 統計・フィード画面（基本表示）
4. マイページ（プロフィール + 設定）
5. Clerk認証
6. テーマ・文字サイズ設定

### Future（拡張）
1. コメント機能
2. フォロー/フォロワー
3. ポモドーロ時間カスタム
4. 通知・リマインダー
5. バッジ・streak
6. ランキング
